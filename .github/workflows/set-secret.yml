# Demonstration how to set secrets from Github Workflows

name: set-secret

on:
  workflow_dispatch:
  workflow_call:

permissions: {}

jobs:
  main:
    name: "Set Secret"
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      # Checkout required to use `gh`
      - id: checkout
        name: 'Checkout'
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          fetch-tags: false
      - id: set-token
        name: "Set Secret"
        run: |
          secret="Very secret secret!"
          # Ensure, the secret is not exposed in output.
          echo "::add-mask::${secret}"
          # Propagate Secret
          # Without app specified defaults to: actions, dependabot
          gh secret set VerySecret --body "${secret}"
